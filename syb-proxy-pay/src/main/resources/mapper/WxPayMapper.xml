<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.shenpu.proxy.pay.mapper.WxPayMapper" >
  <resultMap id="BaseResultMap" type="com.shenpu.proxy.pay.domain.WxPay" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="PAY_ID" property="payId" jdbcType="CHAR" />
    <result column="TRANSACTION_ID" property="transactionId" jdbcType="VARCHAR" />
    <result column="APPID" property="appid" jdbcType="VARCHAR" />
    <result column="MCH_ID" property="mchId" jdbcType="VARCHAR" />
    <result column="OUT_TRADE_NO" property="outTradeNo" jdbcType="VARCHAR" />
    <result column="NONCE_STR" property="nonceStr" jdbcType="VARCHAR" />
    <result column="SIGN" property="sign" jdbcType="VARCHAR" />
    <result column="RESULT_CODE" property="resultCode" jdbcType="VARCHAR" />
    <result column="ERR_CODE" property="errCode" jdbcType="VARCHAR" />
    <result column="ERR_CODE_DES" property="errCodeDes" jdbcType="VARCHAR" />
    <result column="TRADE_STATE" property="tradeState" jdbcType="VARCHAR" />
    <result column="DEVICE_INFO" property="deviceInfo" jdbcType="VARCHAR" />
    <result column="OPENID" property="openid" jdbcType="VARCHAR" />
    <result column="IS_SUBSCRIBE" property="isSubscribe" jdbcType="VARCHAR" />
    <result column="TRADE_TYPE" property="tradeType" jdbcType="VARCHAR" />
    <result column="BANK_TYPE" property="bankType" jdbcType="VARCHAR" />
    <result column="TOTAL_FEE" property="totalFee" jdbcType="VARCHAR" />
    <result column="TIME_END" property="timeEnd" jdbcType="VARCHAR" />
    <result column="INSERT_TIME" property="insertTime" jdbcType="TIMESTAMP" />
    <result column="UPDATE_TIME" property="updateTime" jdbcType="TIMESTAMP" />
  </resultMap>
 
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    TRANSACTION_ID, PAY_ID, APPID, MCH_ID, OUT_TRADE_NO, NONCE_STR, SIGN, RESULT_CODE, 
    ERR_CODE, ERR_CODE_DES, TRADE_STATE, DEVICE_INFO, OPENID, IS_SUBSCRIBE, TRADE_TYPE, 
    BANK_TYPE, TOTAL_FEE, TIME_END
  </sql>
  
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="com.shenpu.proxy.pay.domain.WxPay" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from t_wx_pay
    where TRANSACTION_ID = #{transactionId,jdbcType=CHAR}
  </select>
 
 
  <insert id="insert" parameterType="com.shenpu.proxy.pay.domain.WxPay" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_wx_pay (TRANSACTION_ID, PAY_ID, APPID, 
      MCH_ID, OUT_TRADE_NO, NONCE_STR, 
      SIGN, RESULT_CODE, ERR_CODE, 
      ERR_CODE_DES, TRADE_STATE, DEVICE_INFO, 
      OPENID, IS_SUBSCRIBE, TRADE_TYPE, 
      BANK_TYPE, TOTAL_FEE, TIME_END,INSERT_TIME,UPDATE_TIME
      )
    values (#{transactionId,jdbcType=VARCHAR}, #{payId,jdbcType=CHAR}, #{appid,jdbcType=VARCHAR}, 
      #{mchId,jdbcType=VARCHAR}, #{outTradeNo,jdbcType=VARCHAR}, #{nonceStr,jdbcType=VARCHAR}, 
      #{sign,jdbcType=VARCHAR}, #{resultCode,jdbcType=VARCHAR}, #{errCode,jdbcType=VARCHAR}, 
      #{errCodeDes,jdbcType=VARCHAR}, #{tradeState,jdbcType=VARCHAR}, #{deviceInfo,jdbcType=VARCHAR}, 
      #{openid,jdbcType=VARCHAR}, #{isSubscribe,jdbcType=VARCHAR}, #{tradeType,jdbcType=VARCHAR}, 
      #{bankType,jdbcType=VARCHAR}, #{totalFee,jdbcType=VARCHAR}, #{timeEnd,jdbcType=VARCHAR},now(),now()
      )
  </insert>
  
  
  
  <update id="updateByOrderNo" parameterType="com.shenpu.proxy.pay.domain.WxPay" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_wx_pay
    <set >
      <if test="transactionId != null" >
        TRANSACTION_ID = #{transactionId,jdbcType=VARCHAR},
      </if>
      <if test="appid != null" >
        APPID = #{appid,jdbcType=VARCHAR},
      </if>
      <if test="mchId != null" >
        MCH_ID = #{mchId,jdbcType=VARCHAR},
      </if>
      <if test="nonceStr != null" >
        NONCE_STR = #{nonceStr,jdbcType=VARCHAR},
      </if>
      <if test="sign != null" >
        SIGN = #{sign,jdbcType=VARCHAR},
      </if>
      <if test="resultCode != null" >
        RESULT_CODE = #{resultCode,jdbcType=VARCHAR},
      </if>
      <if test="errCode != null" >
        ERR_CODE = #{errCode,jdbcType=VARCHAR},
      </if>
      <if test="errCodeDes != null" >
        ERR_CODE_DES = #{errCodeDes,jdbcType=VARCHAR},
      </if>
      <if test="tradeState != null" >
        TRADE_STATE = #{tradeState,jdbcType=VARCHAR},
      </if>
      <if test="deviceInfo != null" >
        DEVICE_INFO = #{deviceInfo,jdbcType=VARCHAR},
      </if>
      <if test="openid != null" >
        OPENID = #{openid,jdbcType=VARCHAR},
      </if>
      <if test="isSubscribe != null" >
        IS_SUBSCRIBE = #{isSubscribe,jdbcType=VARCHAR},
      </if>
      <if test="tradeType != null" >
        TRADE_TYPE = #{tradeType,jdbcType=VARCHAR},
      </if>
      <if test="bankType != null" >
        BANK_TYPE = #{bankType,jdbcType=VARCHAR},
      </if>
      <if test="totalFee != null" >
        TOTAL_FEE = #{totalFee,jdbcType=VARCHAR},
      </if>
      <if test="timeEnd != null" >
        TIME_END = #{timeEnd,jdbcType=VARCHAR},
      </if>
      UPDATE_TIME = now()
    </set>
    where OUT_TRADE_NO = #{outTradeNo,jdbcType=VARCHAR}
  </update>
  
  <insert id="insertErrorOrder" parameterType="com.shenpu.proxy.pay.domain.WxPay" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_wx_pay_error (TRANSACTION_ID, PAY_ID, APPID, 
      MCH_ID, OUT_TRADE_NO, NONCE_STR, 
      SIGN, RESULT_CODE, ERR_CODE, 
      ERR_CODE_DES, TRADE_STATE, DEVICE_INFO, 
      OPENID, IS_SUBSCRIBE, TRADE_TYPE, 
      BANK_TYPE, TOTAL_FEE, TIME_END,INSERT_TIME
      )
    values (#{transactionId,jdbcType=VARCHAR}, #{payId,jdbcType=CHAR}, #{appid,jdbcType=VARCHAR}, 
      #{mchId,jdbcType=VARCHAR}, #{outTradeNo,jdbcType=VARCHAR}, #{nonceStr,jdbcType=VARCHAR}, 
      #{sign,jdbcType=VARCHAR}, #{resultCode,jdbcType=VARCHAR}, #{errCode,jdbcType=VARCHAR}, 
      #{errCodeDes,jdbcType=VARCHAR}, #{tradeState,jdbcType=VARCHAR}, #{deviceInfo,jdbcType=VARCHAR}, 
      #{openid,jdbcType=VARCHAR}, #{isSubscribe,jdbcType=VARCHAR}, #{tradeType,jdbcType=VARCHAR}, 
      #{bankType,jdbcType=VARCHAR}, #{totalFee,jdbcType=VARCHAR}, #{timeEnd,jdbcType=VARCHAR},now()
      )
  </insert>
  
  <select id="selectByOrderNo" resultMap="BaseResultMap" parameterType="com.shenpu.proxy.pay.domain.WxPay" >
    select 
    <include refid="Base_Column_List" />
    from t_wx_pay
    where OUT_TRADE_NO = #{outTradeNo,jdbcType=VARCHAR}
  </select>
  
</mapper>